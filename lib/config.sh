#!/bin/bash

# 設定管理ライブラリ
# heartbeat.shから分離された設定読み込みと定数定義

# 設定ファイル読み込み関数
load_config() {
    local config_file="$1"
    if [ -f "$config_file" ]; then
        source "$config_file"
        return 0
    else
        echo -e "\033[1;31m[ERROR]\033[0m 設定ファイルが見つかりません: $config_file"
        return 1
    fi
}

# アドバイスメッセージの定数定義
readonly ADVICE_INACTIVITY="
一回のハートビート中に、たくさんのファイルを同時に処理したり、なんらかのたくさんの処理を一度に連続で実行しようとしたりしていませんか？
処理に時間がかかってしまい思考ログの作成が行われない期間が長くなると、無活動状態異常として検知されてしまいます。
たくさんの処理を実行する必要がある場合は、複数のハートビートに分けて一回あたりに処理する数を少なめにすることを推奨します。
適切な範囲で処理を区切って小さく積み重ねていくことが、エージェントの思考を整理し、次の行動に活かすために重要です。

ユーザーの反応を待ち続けたりしていませんか？
ユーザーの反応を待ち続けると、無活動状態として検知される場合があります。
あなたはユーザの反応を待たずとも、自律的に決断や行動ができるはずです。
次のハートビートまでの間に何をするかを考え、次のハートビートでその結果を反映するようにしましょう。
最終手段として、./stop.shを実行してハートビートを停止し、ユーザーの反応を待つこともできます。
"

readonly ADVICE_INTROSPECTION="
最近内省活動が行われていないようです。
一定期間内省活動が行われないと、内省不足として検知されてしまいます。
内省活動は、エージェントの思考を整理し、次の行動に活かすために重要です。
定期的に内省活動を行い、これまでの振り返りを行うことを推奨します。
"

readonly ADVICE_LOOP="
一回のハートビートでずっと活動を続けて同じファイルを繰り返し更新していませんか？
同じファイルを長時間更新し続けると、同一ファイル継続更新ループとして検知されてしまいます。
一回のハートビートでは、適切なタイミングで思考ログを保存し、次のハートビートに備えることを推奨します。
適切な範囲で処理を区切って小さく積み重ねていくことが、エージェントの思考を整理し、次の行動に活かすために重要です。
"

readonly ADVICE_TIMESTAMP="
一回のハートビートでずっと活動を続けていると、思考ログファイル名のタイムスタンプが古くなりすぎてしまうことがあります。
その場合、思考ログに古すぎるタイムスタンプが使われてしまい、タイムスタンプ異常として検知されてしまいます。
一回のハートビートでは、適切なタイミングで思考ログを保存し、次のハートビートに備えることを推奨します。
適切な範囲で処理を区切って小さく積み重ねていくことが、エージェントの思考を整理し、次の行動に活かすために重要です。
"