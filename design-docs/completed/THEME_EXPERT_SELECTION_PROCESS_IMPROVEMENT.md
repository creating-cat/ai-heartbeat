# テーマ専門家選択プロセス改善設計

## 概要

AIエージェントがテーマ開始時に「1人の専門家 vs 複数の専門家」の比較検討をスキップしてしまう問題を解決するための設計文書。専門家コンテキスト検討のタイミングで比較検討を組み込むことで、論理的で効率的なプロセスを実現する。

## 問題の特定

### 現在の問題点

1. **専門家選択プロセスの曖昧性**
   - GEMINI.md: 比較検討を「推奨」としているが必須性が不明確
   - THEME_MANAGEMENT_GUIDE.md: 専門家コンテキスト設定を「任意」と明記
   - 比較検討プロセスについての具体的言及なし

2. **手順の不整合**
   - GEMINI.md: 戦略的分割として比較検討を推奨
   - THEME_MANAGEMENT_GUIDE.md: 比較検討の具体的手順が不明確

3. **ガイダンスの不足**
   - 比較検討をいつ行うべきかが不明確
   - 比較検討をスキップしても良い条件が未定義
   - AIエージェントが判断に迷った場合の指針不足

4. **文書間の一貫性不足**
   - 「推奨」vs「任意」の矛盾
   - AIエージェントの混乱を招く可能性

## 解決方針

### 基本アプローチ

**専門家コンテキスト検討時に比較検討を組み込む**

```
テーマ開始 → 専門家コンテキスト検討開始
    ↓
専門家不要 → そのまま進行
    ↓
専門家必要 → 「1人 vs 複数」比較検討
    ↓
1人が適切 → 専門家コンテキスト設定
    ↓
複数が適切 → サブテーマ分割計画・記録
```

### この方針の利点

1. **自然な判断タイミング**
   - 専門家コンテキストを検討する時点でテーマの性質が明確
   - 「専門家が必要か？」→「1人か複数か？」の論理的流れ

2. **効率性の向上**
   - 専門家不要なテーマでは比較検討をスキップ
   - 無駄な処理を避けてAIエージェントの認知負荷を軽減

3. **実装の明確性**
   - 既存の手順に最小限の変更で組み込み可能
   - 明確な条件分岐で迷いを排除

4. **現在のドキュメント構造との親和性**
   - THEME_MANAGEMENT_GUIDE.mdの既存構造を活用
   - 既存の判断基準との連携が可能

## 具体的な修正計画

### 1. GEMINI.md の修正

#### 修正箇所1: 3.2節「テーマ開始活動」の説明部分（行111-116）

**現在:**
```markdown
**サブテーマ分割の2つのアプローチ**:
- **戦略的分割（推奨）**: テーマ開始時に「1人の専門家 vs 複数の専門家」を比較検討
  - 品質面・専門性・創造性・効率性・リスクの5つの観点で比較評価
  - より良い成果を生み出すアプローチを客観的に選択
  - 「密接に連携している」だけを理由とした統合判断を避ける
- **問題対処的分割**: 内省時に問題の兆候を検知した場合の修正的対応
```

**修正案:**
```markdown
**サブテーマ分割の2つのアプローチ**:
- **戦略的分割（推奨）**: テーマ開始時の専門家コンテキスト検討において「1人の専門家 vs 複数の専門家」を比較検討
  - 専門家が必要と判断されたテーマでのみ実行
  - 品質面・専門性・創造性・効率性・リスクの5つの観点で比較評価
  - より良い成果を生み出すアプローチを客観的に選択
  - 「密接に連携している」だけを理由とした統合判断を避ける
- **問題対処的分割**: 内省時に問題の兆候を検知した場合の修正的対応
```

#### 修正箇所2: 3.2節の詳細手順説明部分（行108-109）

**現在:**
```markdown
※新規テーマの場合、専門家コンテキスト設定時にサブテーマ分割検討を含む
```

**修正案:**
```markdown
※新規テーマの場合、専門家コンテキスト検討時に「1人 vs 複数の専門家」比較検討を含む
```

### 2. ai-docs/THEME_MANAGEMENT_GUIDE.md の修正

#### 修正箇所1: ステップ5の全面的な書き換え（行183-210）

**統括専門家コンテキスト対応版**

**現在:**
```markdown
#### ステップ5: テーマ専門家コンテキストの設定（任意）
そのテーマに最適な専門家役割を決定し、`contexts/{ハートビートID}.md` に記録

**設定判断基準:**
- テーマの専門性が高い場合
- 特定の視点・アプローチが有効な場合
- 一貫した専門性が必要な場合
```

**修正案:**
```markdown
#### ステップ5: テーマ専門家コンテキストの検討

##### 5.1 専門家の必要性判定
以下の条件を満たす場合、専門家コンテキストが有効と判断：
- テーマの専門性が高い場合
- 特定の視点・アプローチが有効な場合
- 一貫した専門性が必要な場合

**専門家不要と判断した場合**: ステップ6に進む

##### 5.2 専門家アプローチの比較検討（専門家必要時のみ実行）
「1人の専門家 vs 複数の専門家」を以下の観点で比較評価：

**比較検討テンプレート:**
```
テーマ: 「[テーマ名]」

パターンA: 1人の専門家（[専門家名]）
- 品質面: [評価]
- 専門性: [評価] 
- 創造性: [評価]
- 効率性: [評価]
- リスク: [評価]

パターンB: 複数の専門家（[専門家1] + [専門家2]）
- 品質面: [評価]
- 専門性: [評価]
- 創造性: [評価] 
- 効率性: [評価]
- リスク: [評価]

比較結果: パターン[A/B]が適切
理由: [具体的な理由]
```

**兼任専門家を避けるべき場合（→パターンB選択）:**
- 複数の独立した専門分野が含まれる
- 各分野が十分な深掘りを必要とする  
- 分野間のアプローチが大きく異なる

**兼任専門家が適切な場合（→パターンA選択）:**
- 密接に関連した分野（例: 「フロントエンド開発者兼UXデザイナー」）
- 一つの分野が主で他が補助的（例: 「データサイエンティスト（統計学的視点重視）」）
- 統合的なアプローチが本質的に必要

##### 5.3 結果に基づく実行
**パターンA（1人の専門家）が適切な場合:**
- 専門家コンテキストを設定（5.4の手順に従う）

**パターンB（複数の専門家）が適切な場合:**
- 統括専門家コンテキストを設定（5.4の手順に従う）
- サブテーマ分割を計画・記録
- 次のハートビートでサブテーマ開始活動を実行

##### 5.4 専門家コンテキストの設定（パターンA・B共通）

**パターンA選択時**: 通常の専門家コンテキストを設定

**パターンB選択時**: 統括専門家コンテキストを設定

**統括専門家コンテキストの概念:**
統括専門家は個別の専門分野ではなく、プロジェクト全体の管理・統合に特化した役割を担います。

**統括専門家の典型的な役割:**
- **プロジェクトマネージャー**: 全体進行管理、品質保証、リスク管理
- **アーキテクト**: 技術的一貫性、設計統合、標準化
- **プランナー**: 戦略策定、優先順位管理、リソース配分
- **ディレクター**: 創造的方向性、品質基準、ビジョン統一

**統括専門家の制約:**
- 個別専門分野の詳細作業には関与しない
- サブテーマ間の調整・統合に集中
- 全体的な品質・一貫性の責任者として機能

**サブテーマとの関係:**
- サブテーマ活動中は統括専門家を意識しない（「知っているが意識しない」原則）
- サブテーマ統合時に統括専門家の視点で評価・調整を実施
```

#### 修正箇所2: 兼任専門家の判断基準の統合
現在の兼任専門家に関する記述（行192-202）を5.2節に統合し、パターン選択の判断基準として活用。

### 3. ai-docs/THEME_CONCEPT_GUIDE.md の修正

#### 修正箇所: 戦略的分割の説明部分（行312-315）

**現在:**
```markdown
#### **戦略的分割（推奨・積極的）**
テーマ開始時に「1人の専門家 vs 複数の専門家」を比較検討し、より良い成果を得るアプローチを選択する
```

**修正案:**
```markdown
#### **戦略的分割（推奨・積極的）**
テーマ開始時の専門家コンテキスト検討において「1人の専門家 vs 複数の専門家」を比較検討し、より良い成果を得るアプローチを選択する

**実行条件**: 専門家コンテキストが必要と判断されたテーマでのみ実行
```

### 4. ai-docs/OPERATION_DETAILS.md の修正

#### 修正箇所: 戦略的分割の記録に関する説明（行42-43）

**現在:**
```markdown
* **戦略的分割の記録**: 新規テーマ開始時の専門家コンテキスト検討における比較検討プロセス（1人の専門家 vs 複数の専門家）を活動ログに記録（専門家必要時のみ）
```

**修正案:**
```markdown
* **戦略的分割の記録**: 新規テーマ開始時の専門家コンテキスト検討における比較検討プロセス（1人の専門家 vs 複数の専門家）を活動ログに記録（専門家必要時のみ）
* **統括専門家の記録**: パターンB選択時の統括専門家コンテキスト設定内容を活動ログに記録
```

## 期待される効果

### 1. 明確な実行条件の確立
- **専門家不要**: 比較検討をスキップ
- **専門家必要**: 比較検討を実行
- AIエージェントが迷わない明確な判断基準

### 2. 論理的な手順の実現
- 専門家必要性判定 → 比較検討 → 結果に基づく実行
- 自然で理解しやすいフロー

### 3. 文書間の一貫性確保
- 全ドキュメントで「専門家コンテキスト検討時」に統一
- 矛盾する記述の解消

### 4. AIエージェントの判断負荷軽減
- 明確な条件分岐で迷いを排除
- 不要な処理のスキップが可能
- 本質的な思考・創造活動への集中

### 5. 効率性の向上
- 無駄な比較検討の排除
- 適切なタイミングでの専門家選択
- システム全体のパフォーマンス向上

### 6. 統括専門家コンテキストによる追加効果
- **プロジェクト全体の一貫性確保**: 各サブテーマ間の整合性を保つ
- **戦略的な判断支援**: サブテーマの優先順位決定とリソース配分の最適化
- **統合時の効率性**: サブテーマ完了後の統合作業の円滑化
- **品質管理の向上**: 一貫した評価基準での成果物統合
- **複雑テーマへの対応**: 複数専門家が必要な場合でも適切な統括管理を実現

## 実装上の注意点

### 統括専門家コンテキスト関連
- **役割の明確化**: 個別専門分野への深入りを避ける制約の明記
- **サブテーマとの関係性**: 「知っているが意識しない」原則との整合性確保
- **既存仕組みとの親和性**: MCPツール（`create_theme_expert_context`）はそのまま使用可能

### 一般的な注意点

### 1. 段階的な修正
- 複数ファイルの同時修正が必要
- 文書間の整合性を保つための慎重な作業

### 2. 既存機能への影響
- 現在動作しているAIエージェントへの影響を最小化
- 後方互換性の確保

### 3. テスト・検証
- 修正後のドキュメントでAIエージェントが適切に動作するかの確認
- 比較検討プロセスが正しく実行されるかの検証

## 結論

この修正により、AIエージェントが「1人の専門家 vs 複数の専門家」の比較検討をスキップしてしまう問題を根本的に解決できる。専門家コンテキスト検討のタイミングで比較検討を組み込むことで、論理的で効率的、かつ実装しやすいプロセスを実現する。

---

**作成日**: 2025-01-20  
**ステータス**: 設計完了・実装待ち  
**関連ファイル**: GEMINI.md, ai-docs/THEME_MANAGEMENT_GUIDE.md, ai-docs/THEME_CONCEPT_GUIDE.md, ai-docs/OPERATION_DETAILS.md