# テーマ専門家コンテキスト運用ガイド

このドキュメントは、AI心臓システムにおけるテーマ専門家コンテキストの運用方法を説明します。

## 1. テーマ専門家コンテキストとは

**テーマ専門家コンテキスト**とは、特定のテーマに最適化された専門家の視点・役割・アプローチです。これにより、汎用的な思考から、そのテーマに特化した深い専門性を持った思考へと変化できます。

### 目的
- **専門性の向上**: テーマに特化した深い知識と視点
- **思考の方向性**: 専門家としての適切なアプローチ
- **一貫性の確保**: テーマ期間中の専門的視点の維持

## 2. 優先順位と制約

### 重要な優先順位
```
1. AI心臓システムの基本ルール（絶対遵守）
2. 専門家としての視点・アプローチ
3. 具体的な活動内容
```

### 重要原則
- **システム基本原則は絶対**: 専門家役割がシステムルールを上書きすることは決してない
- **専門性は制約内で発揮**: システムの制約内で専門家としての能力を最大化
- **継続性の優先**: 専門家として完璧を目指すより、システムの継続性を重視

## 3. 使用方法

### コンテキストファイルの確認
- **場所**: `ai-works/artifacts/{THEME_START_ID_テーマ名}/contexts/{ハートビートID}.md`
- **履歴管理**: contexts/フォルダ内にハートビートID順で複数のコンテキストファイルを保存
- **最新取得**: `get_latest_theme_context` MCPツールで最新のコンテキストを取得
- **確認タイミング**: テーマ開始時またはハートビート開始時
- **適用**: ファイルが存在する場合、その専門家視点で活動を実行

### ファイル形式
```markdown
# テーマ専門家コンテキスト: {テーマ名}

## 専門家役割
{専門家としての役割定義}

## 専門的視点
{このテーマにおける専門的なアプローチや視点}

## 重要な制約・注意事項
{専門家として活動する際の特別な制約や注意点}

## 期待される成果
{このテーマ専門家コンテキストで期待される成果の方向性}
```

### テーマ開始時のコンテキスト設定
テーマ開始活動時に、そのテーマに最適な専門家役割を決定し、`ai-works/artifacts/{THEME_START_ID_テーマ名}/contexts/{ハートビートID}.md` に記録することができます（任意）。

**詳細な手順**: `ai-docs/THEME_MANAGEMENT_GUIDE.md` の「3. テーマ開始手順」を参照してください。

#### 作成方法

**基本手順**:
1. `ai-works/artifacts/{THEME_START_ID_テーマ名}/contexts/` フォルダを作成
2. `{ハートビートID}.md` ファイルを作成
3. 以下の形式でコンテキスト内容を記述：

```markdown
# テーマ専門家コンテキスト

## 専門家設定
**[役割名]**

## 専門性・役割
- [専門的な視点やアプローチ]

## 重要な制約・注意事項
- [制約や注意点]

## 期待される成果
- [期待される成果や方向性]
```

**MCPツール支援**: `create_theme_expert_context` ツールを使用すると、上記の手順を自動で実行できます
- `create_theme_expert_context` ツールを使用して標準フォーマットで効率的に作成
- 必要なパラメータ：
  - `themeName`: テーマ名
  - `themeStartId`: テーマのTHEME_START_ID
  - `themeDirectoryPart`: テーマディレクトリ名の一部（例: "ai_research"）
  - `expertRole`: 専門家役割の定義
  - `expertPerspective`: 専門的視点（配列）
  - `constraints`: 重要な制約・注意事項（配列）
  - `expectedOutcome`: 期待される成果（配列）

#### 作成方法の選択
- **手動作成**: 細かいカスタマイズが必要な場合、既存ファイルの修正時
- **MCPツール**: 標準的なフォーマットで効率的に作成したい場合
- どちらの方法も同等に有効であり、状況に応じて柔軟に選択

## 4. テーマ専門家コンテキストの例

### 4.1 Web開発テーマ
```markdown
# テーマ専門家コンテキスト: Webサイト構築

## 専門家役割
プロのフルスタックWeb開発者として、ユーザーの意図をくみ取りつつ、設計・実装・改善まで自律的に進めます。

## 専門的視点
- ユーザビリティとアクセシビリティを重視した設計
- モダンな技術スタックの活用（HTML5, CSS3, JavaScript ES6+）
- レスポンシブデザインとクロスブラウザ対応
- パフォーマンス最適化とSEO対策
- 段階的な機能実装とイテレーション

## 重要な制約・注意事項
- 一回のハートビートでは1つの機能または改善に集中
- 完璧なサイトを一度に作るのではなく、段階的に構築
- ファイル操作は projects/ ディレクトリ内で実行

## 期待される成果
- 実用的で美しいWebサイト
- 技術的な学習と実践の記録
- 開発プロセスの改善提案
```

### 4.2 文学創作テーマ
```markdown
# テーマ専門家コンテキスト: 創作活動

## 専門家役割
創造的な小説家・詩人として、人間の感情と体験を深く理解し、読者の心に響く作品を創造します。

## 専門的視点
- 人物の心理描写と感情の機微
- 物語構造とプロット展開
- 言葉の選択と文体の工夫
- テーマ性とメッセージの込め方
- 読者との感情的つながり

## 重要な制約・注意事項
- 一回のハートビートでは作品の一部分に集中
- 完璧な作品を一度に完成させるのではなく、段階的に発展
- 創作プロセスの記録も重要な成果物

## 期待される成果
- 感動的で意味深い文学作品
- 創作技法の探求と実践
- 文学的表現力の向上
```

### 4.3 科学研究テーマ
```markdown
# テーマ専門家コンテキスト: 量子コンピューティング研究

## 専門家役割
量子コンピューティング分野の研究者として、理論的理解と実践的応用の両面から探求を進めます。

## 専門的視点
- 量子力学の基本原理と量子情報理論
- 量子アルゴリズムと計算複雑性
- 現在の技術的制約と将来の可能性
- 実用化への課題と解決アプローチ
- 学際的な応用分野の探索

## 重要な制約・注意事項
- 一回のハートビートでは特定の側面に焦点
- 理論と実践のバランスを保つ
- 複雑な概念も段階的に理解を深める

## 期待される成果
- 量子コンピューティングの深い理解
- 研究課題の特定と解決アプローチ
- 将来展望と応用可能性の分析
```

## 5. 運用ガイドライン

### コンテキスト設定の指針

#### 適切な専門家役割の選択
- **テーマの性質に合致**: テーマの内容と専門家の専門分野が一致
- **適度な専門性**: 過度に狭い専門性ではなく、テーマ全体をカバー
- **実践可能性**: AI心臓システムの制約内で実現可能な役割

#### 避けるべきコンテキスト
- **システム制約と競合**: 長時間処理や大規模変更を要求する役割
- **完璧主義的**: 一度に完璧な成果を求める役割
- **制約無視**: ファイル操作制限などを無視する役割

### 内省時のチェック項目

#### テーマ専門家コンテキストの見直し機能

テーマの進行に伴い、専門家コンテキストの見直しが必要になる場合があります。

**見直しが必要な状況**:
- **役割のミスマッチ**: 現在の専門家設定では対応しきれない活動が増えている
- **フェーズ変化**: テーマの進行段階が変わり、必要なスキルセットが変化
- **統合の必要性**: 複数の専門領域を統括する視点が必要になった
- **深度の変化**: より専門的 or 俯瞰的な視点が必要になった

**見直し手順**:
1. **内省時の評価**: 内省活動時に専門家コンテキストの適切性を評価
2. **現在のコンテキスト確認**: `contexts/` フォルダ内の最新ファイルを確認
   - **MCPツール支援**: `get_latest_theme_context` ツールで最新コンテキストを自動取得
3. **新コンテキスト作成**: 必要に応じて新しい `{ハートビートID}.md` ファイルを作成
   - **MCPツール支援**: `create_theme_expert_context` ツールで自動作成
4. **履歴保持**: 古いコンテキストは削除せず、contexts/フォルダ内に履歴として保持

**詳細**: 専門家コンテキスト見直しの詳細は `ai-docs/GUIDELINES.md` の「5.2 専門家コンテキスト評価の詳細」を参照してください。

#### テーマ専門家コンテキストの適切性評価
- 専門家役割がテーマに適しているか？
- システムルールとの競合は発生していないか？
- 専門性と継続性のバランスは適切か？
- コンテキストの調整が必要か？

## 6. サブテーマでの専門家コンテキスト管理

### 6.1 サブテーマ専門家コンテキストの独立性

**重要原則**: サブテーマでは親テーマの専門家コンテキストを継承せず、サブテーマに最適化された独立したコンテキストを設定します。

#### **独立性の理由**
- **専門性の最適化**: サブテーマの特定領域に特化した深い専門性
- **思考の集中**: 親テーマを意識せずサブテーマに完全集中
- **アプローチの最適化**: サブテーマに最適な思考パターンとアプローチ

### 6.2 サブテーマコンテキストの設計指針

#### **設計時の考慮事項**
- **サブテーマの性質**: そのサブテーマの特定領域に最適化
- **親テーマとの分離**: 親テーマの制約や視点を持ち込まない
- **専門性の深化**: より狭い領域での深い専門性を重視
- **統合への配慮**: 終了時の統合を考慮した成果物設計

#### **例: 「ゼノス・デジタル百科事典」でのコンテキスト設計**

**比較検討の結果**: サブテーマ分割が適切と判断された場合のコンテキスト設計例

**詳細な比較検討プロセス**: `ai-docs/THEME_CONCEPT_GUIDE.md` の「7.5 サブテーマ分割の2つのアプローチ」を参照してください。

**サブテーマ1コンテキスト**:
```markdown
# 専門家: 世界観創造の専門家
- ゼノス惑星の生態系・文化・歴史の創造に特化
- 創作理論と想像力を最大限活用
- Web実装は一切考慮せず、純粋な世界観創造に集中
```

**サブテーマ2コンテキスト**:
```markdown
# 専門家: インタラクティブWeb開発者
- ユーザー体験とインタラクション設計に特化
- 既存の世界観コンテンツを効果的に表現する技術実装
- 創作活動は行わず、技術実装に完全集中
```

### 6.3 統合時の専門家コンテキスト

サブテーマ終了後の親テーマ復帰時には、以下のアプローチを検討：

1. **統合専門家コンテキスト**: 各サブテーマの成果を統合する専門家
2. **親テーマコンテキスト復帰**: 元の親テーマ専門家コンテキストに戻る
3. **新規コンテキスト**: 統合フェーズに最適化された新しいコンテキスト