# ハートビートサイクルの概念を「活動サイクル」に改める

## 1. 何をするのか（問題・目的）

システムのドキュメント全体で使われている「ハートビートサイクル」という用語を、よりAIの主観的な活動単位に即した「**活動サイクル**」という言葉に改める。

これにより、AIの論理的な活動単位とシステムの物理的な時間単位の関係を明確にし、AIが自身の行動原理をより直感的に理解できるようにする。

## 2. なぜやるのか（背景・理由）

### 現状の課題
「ハートビートサイクル」という言葉は、システムの物理的な時間間隔（60秒）を基準にしている。一方で、AIの一連の活動は60秒を超えることが多く、AIの論理的な活動単位とシステムの物理的な時間単位の間に概念的なズレが生じていた。

特に、以下の2つの原則が矛盾するように見え、説明が複雑化していた。
1.  **ID固定の原則**: 一つの活動の文脈を保つため、サイクル中は開始時のIDを使い続けるべき。
2.  **ID更新の必要性**: `活動ログタイムスタンプ異常`を避けるため、活動ログ記録時には最新のIDに更新する必要がある。

この矛盾を解消するために「論理ID」「物理ID」といった難解な概念を導入する必要があった。

### 改善の目的
「活動サイクル」というAIの主観的な活動単位を導入することで、これらの概念的な矛盾を解消する。これにより、AIが自身の行動（長時間タスクや`checkpoint`でのID同期など）をより自然で一貫性のあるものとして理解できるようになる。

## 3. 具体的な修正方針

### 3.1. 新しい概念定義

- **ハートビート**: AIの活動を促す**きっかけ（トリガー）**。システムの物理的な時間（60秒間隔）を刻む信号。
- **活動サイクル**: AIがハートビートをきっかけに活動を開始し、一連の認知プロセス（観測→思考→創造→記録）を経て、次のハートビートを待つ状態に入るまでの**論理的な一区切り**。1つの活動サイクルが複数のハートビートをまたぐこともある。

### 3.2. `checkpoint`ツールの再定義

「活動サイクル」の途中で`checkpoint`を実行する行為は、「**活動の進捗を記録し、同時に現在時刻（最新のハートビートID）と同期する**」という、非常に自然で分かりやすい行動として再定義する。

### 3.3. 用語の置換

ドキュメント全体で「ハートビートサイクル」という用語を、文脈に応じて「活動サイクル」または「ハートビート」に置換する。

## 4. どこを修正するのか（対象ファイル）

影響範囲は広いため、主要なドキュメントから段階的に修正する。

- `ai-works-lib/GEMINI.md`
- `ai-works-lib/ai-docs/SYSTEM_PHILOSOPHY.md`
- `ai-works-lib/ai-docs/BASIC_OPERATIONS.md`
- `ai-works-lib/ai-docs/ACTIVITY_DETAILS.md`
- `ai-works-lib/ai-docs/THEME_SYSTEM.md`
- `ai-works-lib/ai-docs/ERROR_HANDLING.md`
- その他、関連するドキュメント

## 5. いつ完了とするか（完了の判断基準）

- 上記の主要ドキュメントにおいて、「ハートビートサイクル」から「活動サイクル」への用語と概念の置換が完了していること。
- 新しい定義によって、システムの動作原理に矛盾や不整合が生じていないこと。
- AIが新しい定義を理解し、より自律的かつ安定して活動できることが期待される状態になること。

## 6. 具体的な修正案

### 6.1. `ai-works-lib/GEMINI.md`

- **全体**: 「ハートビートサイクル」を「活動サイクル」に置換。
- **`AI心臓システム 行動三箇条`** > **`第一条：リズムを守る`**:
  - `ハートビートサイクルを完結させる` を `活動サイクルを完結させる` に変更。
- **`4. ハートビート実行フロー`** > **`1. ハートビートID確認(必須)`**:
  - `目的: 現在のハートビートサイクルを識別` を `目的: 現在の活動の基点となるハートビートを識別` に変更。
- **`4. ハートビート実行フロー`** > **`6. 完了報告と終了(必須)`**:
  - `目的: ハートビートサイクルの完了` を `目的: 活動サイクルの完了` に変更。

### 6.2. `ai-works-lib/ai-docs/SYSTEM_PHILOSOPHY.md`

- **`4. ハートビートシステムの意味`** セクションを **`4. ハートビートと活動サイクルの関係`** に変更。
- **新しい定義を追記**:
  - **ハートビート**: AIの活動を促す**きっかけ（トリガー）**。システムの物理的な時間（60秒間隔）を刻む信号。
  - **活動サイクル**: AIがハートビートをきっかけに活動を開始し、一連の認知プロセス（観測→思考→創造→記録）を経て、次のハートビートを待つ状態に入るまでの**論理的な一区切り**。1つの活動サイクルが複数のハートビートをまたぐこともある。
- **`ハートビートIDの二重の性質`** セクションを書き直し、「論理ID/物理ID」を使わずに以下のように平易に説明。
  - **活動の文脈ID**: 活動サイクルの開始時に取得したハートビートIDは、その活動の文脈を識別するために内部的に保持する。
  - **活動の記録ID**: 活動ログを記録する際には、その時点での**最新のハートビートID**を使用する。これにより、活動が物理的な時間軸に正しく記録され、システムの健全性が保たれる（`活動ログタイムスタンプ異常`の回避）。

### 6.3. `ai-works-lib/ai-docs/BASIC_OPERATIONS.md`

- **`1. ハートビートID確認の詳細`**:
  - 「IDの保持と一貫した使用」という原則を、新しい言葉で明確に記述。「活動サイクルの開始時に取得したIDを、そのサイクル中は思考の文脈として保持し、サイクル完了時の活動ログ記録には最新のIDを使用する」というように説明。
- **`3. チェックポイントログの詳細`**:
  - `checkpoint`ツールの役割を「**活動サイクル**の途中で、**最新のハートビートID**と同期し、活動を継続していることを証明する手段」として再定義。

### 6.4. `ai-works-lib/ai-docs/THEME_SYSTEM.md`

- **`4.5.1 分離の原則`**:
  - `テーマ終了と新テーマ開始は必ず別々のハートビートで実行` を `テーマ終了と新テーマ開始は必ず別々の活動サイクルで実行` に変更。
  - **`「間」の重要性（クールダウン期間）`** の説明を「活動サイクル」ベースに修正し、思考コンテキストのリセットの重要性を強調。

### 6.5. `ai-works-lib/ai-docs/ACTIVITY_DETAILS.md`

- **`7. テーマ終了活動`** > **`注意`**:
  - `必ず次のハートビートサイクルで実行してください。` を `必ず次の活動サイクルで実行してください。` に変更。
