# 「テーマ未設定時の行動原則」の構造的改善

## 1. 何をするのか（問題・目的）

AIの行動原則である「テーマ未設定時は最優先でテーマ開始活動を行う」という指示の表現を、よりAIが誤解しにくい構造に改善する。

具体的には、単純な「もし～なら～せよ（If-Then）」という条件分岐的な指示から、「**まず観測し、次に判断し、そして行動する**」という明確な思考プロセス（フロー）を指示する形式に変更する。

この変更は、`design-tasks/fix-repeated-theme-start-issue.md`で指摘されている「同じテーマ開始活動を繰り返す問題」の根本的な解決策も兼ねる。

## 2. なぜやるのか（背景・理由）

### 現状の課題
現在の`活動開始時点でテーマ未設定時は最優先でテーマ開始活動を行う`という記述は、AIが以下のように誤解するリスクを内包している。

- **元のルール**: `[活動開始時に] [テーマが未設定] ならば [テーマ開始活動を行う]`
- **AIの誤解**: `[テーマが未設定] ならば [テーマ開始活動を行う]`

AIは目標（テーマ設定）に集中するあまり、「いつ（活動開始時に）」という重要なコンテキストを無視し、「テーマが未設定」という条件が満たされた瞬間に（例えばテーマ終了直後に）即座に行動を起こしてしまう可能性がある。これは、思考のクールダウン期間を設けるというシステムの重要な理念に反する。

### 根本原因と統合的解決
この問題の根本原因は、`fix-repeated-theme-start-issue.md`で分析された問題と同じく、**「行動の前に、現状を観測する」というステップがAIの行動フローに構造的に組み込まれていない**点にある。

今回の「思考プロセス」への変更は、この根本原因を解決するものであり、両方の問題を一度に、より本質的に解決することができる。

## 3. 具体的な修正方針

### 3.1. `GEMINI.md`の役割分担の明確化

- **`第二条：テーマに集中する`**: この条文から`活動開始時点でテーマ未設定時は...`という一文を**削除**し、「テーマ設定後の行動原則」に特化させる。
- **`4. 活動実行フロー > 2. 活動選択`**: このセクションを、AIが従うべき具体的な**思考プロセス**として書き換える。

### 3.2. 新しい「活動選択」の思考プロセス
> **活動選択は、以下の思考プロセスに従って行ってください。**
>
> 1.  **現状の観測**: まず、現在のテーマ状況を確認します。（`check_theme_status`ツールの使用を推奨）
> 2.  **活動の決定**:
>     *   **テーマが未設定の場合**: 「テーマ開始活動」を選択します。
>     *   **テーマが設定済みの場合**: 「思考」「観測」「創造」「内省」「テーマ終了」の中から、テーマの状況やあなたの判断に基づき、最も適切と考える活動を一つ選択します。

## 4. どこを修正するのか（対象ファイル）

- `ai-works-lib/GEMINI.md` （最重要）
- `ai-works-lib/ai-docs/ACTIVITY_DETAILS.md`
- `ai-works-lib/ai-docs/THEME_SYSTEM.md`
- `design-tasks/fix-repeated-theme-start-issue.md` （このタスクに統合された旨を追記し、完了とする）

## 5. いつ完了とするか（完了の判断基準）

- 上記ドキュメントの修正が完了していること。
- AIの行動原則が、条件分岐的な指示ではなく、明確な思考プロセスとして定義されていること。
- AIがテーマ終了直後に即座に次のテーマを開始してしまうリスクが、構造的に排除されていること。
- 「同じテーマを繰り返し開始してしまう問題」が、根本原因レベルで解決されていること。

