# AI心臓システム ファイル構成概要

このドキュメントでは、AI心臓システムを構成する各ファイルの役割と機能について説明します。

## コアファイル

### GEMINI.md
AI心臓システムの中核となる仕様書です。AIの動作原則、処理フロー、思考ログ管理などの基本ルールが記載されています。AIはこのファイルに従って自律的に動作します。

主な内容:
- システムトリガー（ハートビート）の仕組み
- 能動モード/受動モードの処理フロー
- 思考ログ記録のルールとフォーマット
- 停止条件とテーマ移行条件
- 運用原則とエラーハンドリング

### heartbeat.sh
AI心臓システムの「鼓動」を生成するスクリプトです。定期的にAIに対してハートビート信号を送信し、自律的な思考を促します。

主な機能:
- 定期的なハートビート（プロンプト）送信
- Web検索制限の管理（クォータ保護）
- 無活動検知による自動停止機能
- ログ出力と状態表示

### setup.sh
システムの初期設定と起動を行うスクリプトです。tmuxセッションの作成、AIエージェントの起動、初期プロンプトの送信などを行います。

主な機能:
- 既存セッションのクリーンアップ
- agentセッションとheartbeatセッションの作成
- AIエージェントの起動と初期プロンプト実行
- ハートビートの開始

### stop.sh
ハートビートを停止するためのシンプルなスクリプトです。heartbeatセッションに対してCtrl+C信号を送信します。

## サポートファイル

### TROUBLESHOOTING_GUIDE.md
問題発生時のトラブルシューティングガイドです。通常の運用では参照する必要はありませんが、エラーが発生した場合や特殊な状況に直面した際に参照します。

主な内容:
- ツール利用の詳細ガイドライン
- エラーハンドリングとトラブルシューティング手順
- 思考ログの特殊ケース対応
- システム運用の高度なノウハウ

### README.md
プロジェクトの概要と基本的な使用方法を説明するドキュメントです。

主な内容:
- システムの概要説明
- 実行方法と例
- 実行状況の確認方法
- 停止方法
- その他の注意点

## ディレクトリ構造

### artifacts/
AIが生成したアウトプットを保存するディレクトリです。テーマごとにサブディレクトリが作成され、その中に思考ログや成果物が保存されます。

構造:
- `artifacts/{テーマ名}/` - テーマごとの成果物
- `artifacts/{テーマ名}/histories/` - 思考ログファイル

### stats/
Web検索制限などのシステム状態を管理するためのファイルを格納するディレクトリです。

主なファイル:
- `last_web_search.txt` - 最後のWeb検索時刻を記録（通常制限用）
- `quota_exceeded.txt` - クォータ制限超過時に作成（長時間制限用）

## システムフロー概要

1. `setup.sh` でシステムを初期化し、AIエージェントとハートビートを起動
2. `heartbeat.sh` が定期的にハートビート信号を送信
3. AIは `GEMINI.md` のルールに従って自律的に思考・観測・創造・内省を実行
4. 問題発生時は `TROUBLESHOOTING_GUIDE.md` を参照
5. `stop.sh` でハートビートを停止

## ファイル間の関係

- `GEMINI.md` はAIの行動規範を定義
- `heartbeat.sh` はAIに定期的な起動トリガーを提供
- `setup.sh` はシステム全体の初期化と起動を担当
- `stop.sh` はシステムの停止を担当
- `TROUBLESHOOTING_GUIDE.md` は問題解決のリファレンスを提供
- `artifacts/` はAIの思考と成果物を保存
- `stats/` はシステム状態を管理

このファイル構成により、AIは自律的に思考を続け、人間の介入なしに長時間にわたって動作し続けることができます。